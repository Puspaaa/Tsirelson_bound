<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tsirelson's Bound from a Generalised DPI</title>

  <!-- Reveal.js core -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reveal.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/theme/black.css" id="theme" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/highlight/monokai.css" id="code-theme" />

  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    /* ═══════════════════════════════════════════════
       GLOBAL THEME — Dark Mode (default) + Light Mode Toggle
       ═══════════════════════════════════════════════ */
    :root {
      /* Dark theme colors (default) */
      --bg-primary: #0f1419;
      --bg-surface: #1a1f2e;
      --bg-elevated: #242b3d;
      --border: #3d4a5c;
      --text-heading: #e8edf5;
      --text-body: #b8c5d6;
      --text-muted: #6b7d8f;
      --accent-blue: #5b9bf5;
      --accent-purple: #a78bfa;
      --accent-green: #5ae4a7;
      --accent-gold: #fbbf24;
      --accent-red: #f87171;
      --accent-orange: #fb923c;
      --accent-teal: #2dd4bf;
      --accent-pink: #f472b6;

      --r-background-color: var(--bg-primary);
      --r-main-font: 'Inter', 'Segoe UI', system-ui, sans-serif;
      --r-heading-font: 'Inter', 'Segoe UI', system-ui, sans-serif;
      --r-main-font-size: 42px;
      --r-heading-color: var(--text-heading);
      --r-main-color: var(--text-body);
      --r-link-color: var(--accent-blue);
      --r-selection-background-color: rgba(91, 155, 245, 0.3);
    }

    /* Light theme override */
    body.light-mode {
      --bg-primary: #f8f9fc;
      --bg-surface: #ffffff;
      --bg-elevated: #eef1f6;
      --border: #d0d7e2;
      --text-heading: #1a2332;
      --text-body: #3d4f5f;
      --text-muted: #7a8a9a;
      --accent-blue: #2563eb;
      --accent-purple: #7c3aed;
      --accent-green: #059669;
      --accent-gold: #d97706;
      --accent-red: #dc2626;
      --accent-orange: #ea580c;
      --accent-teal: #0d9488;
      --accent-pink: #db2777;
    }

    /* Force background everywhere */
    body, .reveal-viewport {
      background: var(--bg-primary) !important;
      background-color: var(--bg-primary) !important;
      transition: background-color 0.4s ease;
    }
    .reveal .slide-background {
      background-color: var(--bg-primary) !important;
    }
    .reveal .slide-background-content {
      background: none !important;
    }

    .reveal {
      font-family: var(--r-main-font);
      background-color: var(--bg-primary);
      color: var(--text-body);
    }
    .reveal h1, .reveal h2, .reveal h3 {
      font-weight: 700; text-transform: none; letter-spacing: -0.02em;
      color: var(--text-heading);
    }
    .reveal p, .reveal li, .reveal span {
      color: var(--text-body);
    }
    .reveal .slides > section {
      background-color: transparent;
    }

    /* ─── Utility classes ─── */
    .accent     { color: var(--accent-purple); }
    .accent-red { color: var(--accent-red); }
    .accent-grn { color: var(--accent-green); }
    .accent-ylw { color: var(--accent-gold); }
    .accent-blu { color: var(--accent-blue); }
    .accent-pur { color: var(--accent-purple); }
    .accent-org { color: var(--accent-orange); }
    .small      { font-size: 0.8em; }
    .tiny       { font-size: 0.68em; }
    .dim        { opacity: 0.6; }
    .left-align { text-align: left; }

    /* ─── Prevent overflow on all slides ─── */
    .reveal .slides section {
      overflow: hidden;
      box-sizing: border-box;
      padding: 25px 40px;
      line-height: 1.4;
    }
    .reveal .slides { background-image: none; }

    /* ─── Split layout ─── */
    .split {
      display: flex; gap: 1.2rem; align-items: flex-start;
      justify-content: center; width: 100%;
    }
    .split > .left  { flex: 0.9; text-align: left; min-width: 0; }
    .split > .right { flex: 1.1; display: flex; justify-content: center; align-items: center; min-width: 0; }

    /* ─── Video container ─── */
    .video-box {
      border: 1px solid var(--border); border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
      position: relative; z-index: 0;
      width: 100%;
      background: var(--bg-elevated);
    }
    .video-box video {
      display: block; width: 100%; max-height: 62vh;
      position: relative; z-index: 0;
      object-fit: contain;
      margin: 0; padding: 0;
    }

    /* ─── Hierarchy bars ─── */
    .hierarchy-item {
      display: flex; align-items: center; gap: 0.7rem;
      margin: 0.4rem 0; font-size: 0.85em;
    }
    .hierarchy-bar { height: 6px; border-radius: 3px; flex-shrink: 0; }
    .bar-local    { width: 70px;  background: var(--accent-blue); }
    .bar-quantum  { width: 120px; background: var(--accent-purple); }
    .bar-ns       { width: 170px; background: var(--accent-red); }

    /* ─── Two-column layout ─── */
    .two-col {
      display: grid; grid-template-columns: 1fr 1fr;
      gap: 1.5rem; align-items: start; text-align: left;
    }

    /* ─── Property list ─── */
    .prop-list { list-style: none; padding: 0; margin: 0; }
    .prop-list li {
      padding: 0.35em 0; font-size: 0.82em; border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    .prop-list li::before  { content: '▸ '; color: var(--accent-purple); }
    .prop-list li.bad::before  { content: '✗ '; color: var(--accent-red); }
    .prop-list li.good::before { content: '✓ '; color: var(--accent-green); }

    /* ─── Flow diagram ─── */
    .flow {
      display: flex; align-items: center; justify-content: center;
      gap: 0.4rem; flex-wrap: wrap;
    }
    .flow-box {
      background: var(--bg-surface); border: 1.5px solid; border-radius: 10px;
      padding: 0.7rem 1rem; text-align: center; min-width: 120px;
    }
    .flow-box h4 { margin: 0 0 0.2rem 0; font-size: 0.85em; font-weight: 600; }
    .flow-box p, .flow-box .katex { margin: 0; font-size: 0.7em; }
    .flow-arrow { font-size: 1.5em; color: var(--text-muted); }

    /* ─── Title slide ─── */
    .title-slide h1 {
      font-size: 2.4em;
      background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text; margin-bottom: 0.15em;
    }
    .title-slide h2 {
      font-size: 0.9em; color: var(--text-muted); font-weight: 400; margin-bottom: 1.2em;
    }
    .title-slide .meta {
      font-size: 0.6em; color: var(--text-muted); margin-top: 0.6em;
    }
    .title-slide .meta span { display: block; margin: 0.15em 0; }

    /* ─── Highlight box ─── */
    .highlight-box {
      background: rgba(37, 99, 235, 0.04);
      border: 1px solid rgba(37, 99, 235, 0.15); border-radius: 8px;
      padding: 0.7rem 1rem; margin: 0.5rem 0;
    }

    /* ─── Question callout ─── */
    .question-big {
      font-size: 1em; color: var(--accent-gold);
      font-style: italic; text-align: center; margin-top: 0.6rem;
    }

    /* ─── Subtle bg ─── */
    .reveal .slides {
      background-image: none;
    }

    /* ─── Section divider slides ─── */
    .section-divider {
      display: flex !important;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .section-divider .section-number {
      font-size: 0.5em;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 0.5em;
    }
    .section-divider h2 {
      font-size: 2.2em;
      margin-bottom: 0.2em;
    }
    .section-divider .section-rule {
      width: 100px;
      height: 2px;
      border-radius: 1px;
      margin: 0.5em 0;
    }

    /* ─── Bound badge ─── */
    .bound-badge {
      display: inline-block; padding: 0.4em 1em; border-radius: 6px;
      font-weight: 600; font-size: 0.85em; margin: 0.25em;
    }
    .bound-classical { background: rgba(37, 99, 235, 0.08); border: 1.5px solid var(--accent-blue); color: var(--accent-blue); }
    .bound-quantum   { background: rgba(124, 58, 237, 0.08); border: 1.5px solid var(--accent-purple); color: var(--accent-purple); }
    .bound-ns        { background: rgba(220, 38, 38, 0.08); border: 1.5px solid var(--accent-red); color: var(--accent-red); }

    /* ─── Step blocks ─── */
    .step-block {
      background: var(--bg-surface); border-left: 4px solid var(--accent-purple);
      border-radius: 0 8px 8px 0; padding: 0.55rem 1rem;
      margin: 0.35rem 0; text-align: left;
      box-shadow: 0 1px 4px rgba(0,0,0,0.04);
    }
    .step-block.orange { border-left-color: var(--accent-orange); }
    .step-block.blue   { border-left-color: var(--accent-blue); }
    .step-block.green  { border-left-color: var(--accent-green); }
    .step-block.red    { border-left-color: var(--accent-red); }
    .step-block.yellow { border-left-color: var(--accent-gold); }

    /* ─── Verdict card ─── */
    .verdict-card {
      background: var(--bg-surface); border: 1.5px solid; border-radius: 10px;
      padding: 0.8rem 1.2rem; text-align: center;
      box-shadow: 0 1px 6px rgba(0,0,0,0.06);
    }
    .verdict-card h4 { margin: 0 0 0.3rem 0; font-size: 0.88em; }
    .verdict-card .katex { font-size: 0.8em; }
    .verdict-pass { border-color: var(--accent-green); }
    .verdict-fail { border-color: var(--accent-red); }

    /* ─── Chain diagram ─── */
    .chain-row {
      display: flex; align-items: center; justify-content: center;
      gap: 0.5rem; margin: 0.6rem 0;
    }
    .chain-node {
      background: var(--bg-surface); border: 1.5px solid; border-radius: 10px;
      padding: 0.5rem 0.8rem; text-align: center; min-width: 100px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.04);
    }
    .chain-node h4 { margin: 0 0 0.2rem 0; font-size: 0.8em; font-weight: 600; }
    .chain-node p  { margin: 0; font-size: 0.68em; color: var(--text-muted); }
    .chain-arrow { font-size: 1.5em; color: var(--accent-gold); }

    /* ═══════════════════════════════════════════════
       PROGRESS BAR + HOME BUTTON
       ═══════════════════════════════════════════════ */
    #progress-container {
      position: fixed; bottom: 0; left: 0; width: 100%; height: 5px;
      background: var(--bg-elevated); z-index: 100; cursor: pointer;
    }
    #progress-bar {
      height: 100%; width: 0%;
      background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple), var(--accent-teal));
      transition: width 0.3s ease;
    }
    .progress-marker {
      position: absolute; top: -16px; height: 20px; width: 1px;
      background: rgba(0,0,0,0.1); z-index: 101;
    }
    .progress-marker-label {
      position: absolute; top: -30px; font-size: 10px;
      color: var(--text-muted); white-space: nowrap;
      transform: translateX(-50%);
      pointer-events: none;
    }

    /* Home button */
    #home-btn {
      position: fixed; top: 16px; left: 16px; z-index: 100;
      width: 40px; height: 40px; border-radius: 8px;
      background: var(--bg-surface); border: 1px solid var(--border);
      color: var(--accent-blue); font-size: 18px;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      transition: all 0.2s ease;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    #home-btn:hover {
      background: rgba(37, 99, 235, 0.08); border-color: var(--accent-blue);
      transform: scale(1.05);
    }

    /* Slide map overlay */
    #slide-map {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(15, 20, 25, 0.97); z-index: 200;
      display: none; overflow-y: auto; padding: 50px 40px;
    }
    body.light-mode #slide-map {
      background: rgba(248, 249, 252, 0.97);
    }
    #slide-map.visible { display: flex; flex-wrap: wrap; justify-content: center; gap: 14px; align-content: start; }
    .map-card {
      width: 190px; height: 110px; border-radius: 8px;
      background: var(--bg-surface); border: 1.5px solid var(--border);
      cursor: pointer; padding: 10px;
      display: flex; flex-direction: column; justify-content: center;
      align-items: center; text-align: center;
      transition: all 0.2s ease;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
    }
    .map-card:hover { border-color: var(--accent-blue); transform: scale(1.04); }
    .map-card .map-num { font-size: 13px; color: var(--text-muted); margin-bottom: 4px; }
    .map-card .map-title { font-size: 15px; color: var(--text-heading); font-weight: 600; }
    .map-card .map-section { font-size: 12px; margin-top: 5px; padding: 2px 8px; border-radius: 8px; color: var(--text-muted); }
    .map-card.active { border-color: var(--accent-blue); box-shadow: 0 0 12px rgba(37, 99, 235, 0.15); }
    .map-card.is-divider { background: var(--bg-elevated); border-style: dashed; opacity: 0.65; }
    #slide-map-close {
      position: fixed; top: 18px; right: 28px; z-index: 210;
      font-size: 24px; color: var(--text-muted); cursor: pointer; display: none;
    }
    #slide-map-close:hover { color: var(--text-heading); }
    /* ─── Lemma Accordion ─── */
    .lemma-accordion {
      display: flex; flex-direction: column; gap: 8px;
      width: 100%; max-width: 1840px; margin: 0 auto;
    }
    .lemma-card {
      display: flex; align-items: center; gap: 18px;
      background: var(--bg-surface); border: 1.5px solid var(--border);
      border-radius: 10px; padding: 12px 20px;
      cursor: pointer; transition: all 0.45s cubic-bezier(.4,0,.2,1);
      overflow: hidden; min-height: 60px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.04);
    }
    .lemma-card:hover { border-color: rgba(0,0,0,0.2); }
    .lemma-card.active {
      flex-grow: 1; padding: 18px 24px;
      border-color: var(--lemma-color, var(--accent-purple));
      box-shadow: 0 2px 12px rgba(37,99,235,0.08);
    }
    .lemma-card:not(.active) {
      flex-grow: 0;
    }
    .lemma-header {
      display: flex; align-items: center; gap: 12px;
      white-space: nowrap; flex-shrink: 0;
    }
    .lemma-tag {
      font-size: 15px; font-weight: 700; letter-spacing: 0.06em;
      padding: 5px 14px; border-radius: 5px;
      background: rgba(37,99,235,0.06); border: 1px solid;
      flex-shrink: 0;
    }
    .lemma-name {
      font-size: 20px; font-weight: 600; color: var(--text-heading);
      white-space: nowrap;
    }
    .lemma-eq-small {
      font-size: 17px; color: var(--text-muted); margin-left: 8px;
      white-space: nowrap;
      transition: opacity 0.3s;
    }
    .lemma-card.active .lemma-eq-small { opacity: 0; position: absolute; pointer-events: none; }
    .lemma-body {
      display: none; flex: 1; gap: 18px; align-items: flex-start;
      min-width: 0;
    }
    .lemma-card.active .lemma-body {
      display: flex;
    }
    .lemma-detail {
      flex: 1; min-width: 0;
    }
    .lemma-eq-big {
      font-size: 28px; color: var(--text-heading); margin-bottom: 10px;
      padding: 12px 18px; background: rgba(37,99,235,0.03);
      border-radius: 8px; text-align: center;
      border: 1px solid rgba(0,0,0,0.05);
      transition: transform 0.4s cubic-bezier(.4,0,.2,1);
    }
    .lemma-card.active .lemma-eq-big {
      transform: scale(1);
    }
    .lemma-description {
      font-size: 17px; color: var(--text-body); line-height: 1.65;
    }
    .lemma-description strong { color: var(--text-heading); }
    .lemma-axioms {
      font-size: 15px; margin-top: 8px; padding: 6px 14px;
      background: rgba(124,58,237,0.05); border-radius: 5px;
      color: var(--text-muted); display: inline-block;
    }
    .lemma-venn {
      flex-shrink: 0; width: 300px; height: 220px;
      display: flex; align-items: center; justify-content: center;
      transition: transform 0.4s cubic-bezier(.4,0,.2,1);
    }
    .lemma-card.active .lemma-venn {
      transform: scale(1);
    }
    .lemma-card:not(.active) .lemma-venn { display: none; }
    .lemma-venn svg { width: 100%; height: 100%; }

    /* ─── Reveal.js controls, slide number — theme-aware ─── */
    .reveal .controls { color: var(--accent-blue); }
    .reveal .slide-number {
      color: var(--text-muted) !important;
      background: transparent !important;
      font-size: 16px !important;
      font-family: 'Inter', sans-serif !important;
    }
    .reveal .slide-number a { color: var(--text-muted) !important; }
    .reveal .progress { background: rgba(255, 255, 255, 0.1); color: var(--accent-blue); }
    body.light-mode .reveal .progress { background: rgba(0, 0, 0, 0.08); }

    /* ─── KaTeX — theme-aware text ─── */
    .reveal .katex { color: var(--text-heading); }

    /* ─── Theme Toggle Button ─── */
    #theme-toggle {
      position: fixed; top: 16px; right: 16px; z-index: 100;
      width: 40px; height: 40px; border-radius: 8px;
      background: var(--bg-surface); border: 1px solid var(--border);
      color: var(--accent-gold); font-size: 18px;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    #theme-toggle:hover {
      background: var(--bg-elevated); border-color: var(--accent-gold);
      transform: scale(1.05);
    }
    body.light-mode #theme-toggle {
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    /* ─── Persistent Section Label (top-left) ─── */
    #section-label {
      position: fixed; top: 16px; left: 70px; z-index: 100;
      display: flex; align-items: center; gap: 10px;
      padding: 8px 16px;
      background: var(--bg-surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.4s ease, transform 0.4s ease;
      pointer-events: none;
    }
    #section-label.visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }
    body.light-mode #section-label {
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    #section-label .section-part {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-muted);
    }
    #section-label .section-name {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-heading);
      background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

  </style>
</head>
<body>

  <!-- HOME BUTTON -->
  <button id="home-btn" title="Slide Map (press H)">&#9776;</button>

  <!-- THEME TOGGLE BUTTON -->
  <button id="theme-toggle" title="Toggle Light/Dark Mode (press T)">&#9788;</button>

  <!-- PERSISTENT SECTION LABEL -->
  <div id="section-label">
    <span class="section-part">Part I</span>
    <span class="section-name">The Mystery</span>
  </div>

  <!-- SLIDE MAP OVERLAY -->
  <div id="slide-map"></div>
  <span id="slide-map-close">&times;</span>

  <!-- PROGRESS BAR -->
  <div id="progress-container">
    <div id="progress-bar"></div>
  </div>

  <div class="reveal">
    <div class="slides">


      <!-- ═══════════════════════════════════════════════════════
           TITLE
           ═══════════════════════════════════════════════════════ -->
      <section class="title-slide" data-transition="fade">
        <h1>The Limit of Nature</h1>
        <h2>Tsirelson's Bound from a Generalised Data Processing Inequality</h2>

        <div style="margin: 1.2rem 0;">
          <span class="bound-badge bound-classical">Classical: $S \leq 2$</span>
          <span class="bound-badge bound-quantum">Tsirelson: $S \leq 2\sqrt{2}$</span>
          <span class="bound-badge bound-ns">No-Signaling: $S \leq 4$</span>
        </div>

        <div style="margin: 0.8rem 0;">
          <span style="font-size:0.65em; color:var(--accent-purple);">Based on Dahlsten, Lercher &amp; Renner — <em>New J. Phys.</em> <strong>14</strong> (2012) 063024</span>
        </div>

        <div class="meta">
          <span><strong style="color:var(--text-body);">Mohammed Boudjemaa &ensp;·&ensp; Yash Kumar Nagar &ensp;·&ensp; Nishchay Vora</strong></span>
          <span>M2 Quantum Information — February 6, 2026</span>
        </div>

        <aside class="notes">
          Good morning. Quantum mechanics is strange — but today we ask a deeper
          question: Why isn't it stranger? We explore the Data Processing Inequality
          as the principle that bounds quantum non-locality at Tsirelson's limit.
        </aside>
      </section>


      <!-- ═══════════════════════════════════════════════════════
           SECTION I: THE MYSTERY
           ═══════════════════════════════════════════════════════ -->
      <section class="section-divider" data-transition="fade">
        <div class="section-number">Part I</div>
        <h2 style="background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
          The Mystery
        </h2>
        <div class="section-rule" style="background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));"></div>
        <p class="small dim">Why isn't nature maximally non-local?</p>
      </section>


      <!-- ═══ THE CORRELATION LANDSCAPE ═══ -->
      <section data-transition="slide">
        <h3 style="margin-bottom:0.15em;">The Correlation Landscape</h3>
        <p class="small dim" style="margin-top:0;">Three nested worlds — each with a maximum CHSH score</p>

        <div class="split">
          <div class="left">
            <div class="hierarchy-item">
              <div class="hierarchy-bar bar-local"></div>
              <div>
                <strong class="accent-blu">Local ($\mathcal{L}$)</strong><br>
                <span class="small">$S \leq 2$ — Bell's inequality</span>
              </div>
            </div>
            <div class="hierarchy-item">
              <div class="hierarchy-bar bar-quantum"></div>
              <div>
                <strong class="accent-pur">Quantum ($\mathcal{Q}$)</strong><br>
                <span class="small">$S \leq 2\sqrt{2} \approx 2.83$ — <strong>Tsirelson's bound</strong></span>
              </div>
            </div>
            <div class="hierarchy-item">
              <div class="hierarchy-bar bar-ns"></div>
              <div>
                <strong class="accent-red">No-Signaling ($\mathcal{NS}$)</strong><br>
                <span class="small">$S \leq 4$ — PR-Box lives here</span>
              </div>
            </div>
            <div class="highlight-box" style="margin-top:0.5rem;">
              <span class="small">$\mathcal{L} \;\subset\; \mathcal{Q} \;\subset\; \mathcal{NS}$</span>
              <p class="question-big" style="font-size:0.75em; margin-top:0.3em;">
                Relativity allows up to $S=4$.<br>Why does nature stop at $2\sqrt{2}$?
              </p>
            </div>
          </div>
          <div class="right">
            <div class="video-box">
              <video autoplay muted playsinline preload="auto">
                <source src="assets/1_polytope.webm" type="video/webm" />
              </video>
            </div>
          </div>
        </div>

        <aside class="notes">
          The space of correlations forms nested sets. Classical (local) is innermost,
          no-signaling is outermost. Quantum sits in between. Tsirelson's bound
          marks where quantum ends — but why that specific number?
        </aside>
      </section>


      <!-- ═══ THE CHSH GAME ═══ -->
      <section data-transition="slide">
        <h3 style="margin-bottom:0.15em;">The CHSH Game</h3>
        <p class="small dim" style="margin-top:0;">A coordination game between separated players</p>

        <div class="split">
          <div class="left">
            <div class="highlight-box" style="margin-bottom: 0.4rem; padding: 0.4rem;">
              <p class="small" style="margin:0 0 0.2rem 0;"><strong>Rules:</strong> Alice gets $x$, Bob gets $y$ (random bits)</p>
              <p class="small" style="margin:0;"><strong>Goal:</strong> Output $a, b$ such that $a \oplus b = x \cdot y$</p>
              <p class="tiny dim" style="margin:0.2rem 0 0 0;">Win if outputs XOR equals inputs AND</p>
            </div>

            <div style="margin: 0.4rem 0;">
              <div class="step-block blue" style="padding:0.25rem 0.4rem;">
                <p class="small" style="margin:0;"><strong class="accent-blu">Local strategies:</strong> Win $\tfrac{3}{4}$ rounds</p>
                <p class="tiny dim" style="margin:0;">Best classical: always output $a=b=0$ → fails on $x=y=1$</p>
              </div>
              <div class="step-block purple" style="padding:0.25rem 0.4rem;">
                <p class="small" style="margin:0;"><strong class="accent-pur">Quantum strategies:</strong> Win $\cos^2(\pi/8) \approx 85\%$</p>
                <p class="tiny dim" style="margin:0;">Shared entanglement + optimal measurements</p>
              </div>
              <div class="step-block red" style="padding:0.25rem 0.4rem;">
                <p class="small" style="margin:0;"><strong class="accent-red">PR-Box:</strong> Win $100\%$ of rounds</p>
                <p class="tiny dim" style="margin:0;">$a \oplus b = x \cdot y$ always — but nature forbids it</p>
              </div>
            </div>

            <p class="small accent-ylw" style="margin-top:0.3em;">
              <strong>The mystery:</strong> Why can't nature win more than 85%?
            </p>
          </div>
          <div class="right">
            <div class="video-box">
              <video autoplay muted playsinline preload="auto">
                <source src="assets/s2_tsirelson_gauge.webm" type="video/webm" />
              </video>
            </div>
          </div>
        </div>

        <aside class="notes">
          The CHSH game: Alice and Bob can't communicate but share a resource.
          Local hidden variables max out at 75% wins. Quantum reaches 85%.
          A PR-Box would win every time — but physics doesn't allow it.
        </aside>
      </section>


      <!-- ═══════════════════════════════════════════════════════
           SECTION II: THE FRAMEWORK
           ═══════════════════════════════════════════════════════ -->
      <section class="section-divider" data-transition="fade">
        <div class="section-number">Part II</div>
        <h2 style="background: linear-gradient(135deg, var(--accent-blue), var(--accent-green)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
          The Framework
        </h2>
        <div class="section-rule" style="background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));"></div>
        <p class="small dim">A language to compare theories on equal footing</p>
      </section>


      <!-- ═══ GPT & SYSTEMS OF TYPE (k,l) ═══ -->
      <section data-transition="slide">
        <h3 style="margin-bottom:0.15em;">General Probabilistic Theories</h3>
        <p class="small dim" style="margin-top:0;">A universal language — systems defined by $(k, l)$</p>

        <div class="split">
          <div class="left">
            <div class="highlight-box" style="margin-bottom: 0.35rem; padding: 0.35rem;">
              <p class="small" style="margin:0 0 0.2rem 0;">
                <strong class="accent-blu">GPT Framework:</strong> Describe <em>any</em> theory operationally
              </p>
              <p class="tiny" style="margin:0; color:var(--text-body);">
                No Hilbert spaces assumed — just probabilities from experiments.
              </p>
            </div>

            <div class="highlight-box" style="margin-bottom: 0.35rem; padding: 0.35rem; border-color:rgba(167,139,250,0.3);">
              <p class="small" style="margin:0;">
                <strong class="accent-pur">System of type $(k, l)$:</strong>
              </p>
              <p class="tiny" style="margin:0.15rem 0 0;">
                $k$ fiducial measurements, each with $l$ outcomes.<br>
                State = $\vec{P} = (P(\text{outcome } i \mid \text{measurement } j))$
              </p>
            </div>

            <div class="two-col" style="font-size:0.68em; margin-top:0.3rem;">
              <div>
                <h4 style="color:var(--accent-purple); margin:0 0 0.1rem;">Quantum</h4>
                <p class="tiny" style="margin:0;">Bloch sphere states<br>Continuous measurements</p>
              </div>
              <div>
                <h4 style="color:var(--accent-orange); margin:0 0 0.1rem;">Box-World (2,2)</h4>
                <p class="tiny" style="margin:0;">Square state space<br>PR-Box at corners</p>
              </div>
            </div>

            <div class="highlight-box" style="border-color:rgba(90,228,167,0.2); margin-top:0.35rem; padding:0.3rem;">
              <p style="font-size:0.68em; margin:0; color:var(--accent-green);">
                Classical, quantum, and box-world are all GPTs.<br>
                <strong>Same rules — different state spaces.</strong>
              </p>
            </div>
          </div>
          <div class="right">
            <div class="video-box">
              <video autoplay muted playsinline preload="auto">
                <source src="assets/7_systems.webm" type="video/webm" />
              </video>
            </div>
          </div>
        </div>

        <aside class="notes">
          GPTs let us compare theories on equal footing without assuming QM.
          Systems are classified by (k,l). Quantum has the Bloch sphere;
          box-world has a square — larger state space means more correlations.
        </aside>
      </section>


      <!-- ═══ COMPOSITE SYSTEMS & NO-SIGNALING ═══ -->
      <section data-transition="slide">
        <h3 style="margin-bottom:0.15em;">Composite Systems <span class="accent-grn">&amp; No-Signaling</span></h3>
        <p class="small dim" style="margin-top:0;">How systems combine — and the structural rules they obey</p>

        <div class="split">
          <div class="left">
            <div class="highlight-box">
              <h4 style="color:var(--accent-purple); margin:0 0 0.2rem 0; font-size:0.7em;">Tensor Products</h4>
              <p style="font-size:0.75em; margin:0;">$V_{AB} = V_A \otimes V_B$</p>
              <p class="small dim" style="margin:0.15em 0 0;">Joint state: $P(ii'|jj')$</p>
            </div>
            <div class="highlight-box" style="margin-top:0.4rem;">
              <h4 style="color:var(--accent-purple); margin:0 0 0.2rem 0; font-size:0.7em;">No-Signaling Constraint</h4>
              <p style="font-size:0.75em; margin:0;">$P_A(i|j) = \sum_{i'} P_{AB}(ii'|jj')$</p>
              <p class="small dim" style="margin:0.15em 0 0;">Marginals independent of remote settings.</p>
            </div>
            <div class="highlight-box" style="margin-top:0.4rem; border-color:rgba(251,191,36,0.2); background:rgba(251,191,36,0.04);">
              <p style="font-size:0.73em; margin:0; color:var(--accent-gold); font-weight:600;">
                Box-world satisfies convexity, tensor products, and no-signaling
                — yet exceeds $2\sqrt{2}$. We need something more.
              </p>
            </div>
          </div>
          <div class="right">
            <div class="video-box">
              <video autoplay muted playsinline preload="auto">
                <source src="assets/8_composite.webm" type="video/webm" />
              </video>
            </div>
          </div>
        </div>

        <aside class="notes">
          Box-world is a legitimate GPT: it has convex state spaces, tensor
          products, no-signaling. Yet it exceeds Tsirelson. The structural rules
          are not enough — we need an information-theoretic principle.
        </aside>
      </section>


      <!-- ═══════════════════════════════════════════════════════
           SECTION III: THE PRINCIPLE
           ═══════════════════════════════════════════════════════ -->
      <section class="section-divider" data-transition="fade">
        <div class="section-number">Part III</div>
        <h2 style="background: linear-gradient(135deg, var(--accent-orange), var(--accent-gold)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
          The Principle
        </h2>
        <div class="section-rule" style="background: linear-gradient(90deg, var(--accent-orange), var(--accent-gold));"></div>
        <p class="small dim">The Data Processing Inequality and its consequences</p>
      </section>


      <!-- ═══ GENERALIZED ENTROPY & DPI ═══ -->
      <section data-transition="slide">
        <h3 style="margin-bottom:0.15em;"><span class="accent-org">Generalized Entropy</span> &amp; the <span class="accent-ylw">DPI</span></h3>
        <p class="small dim" style="margin-top:0;">Three axioms that tame non-locality</p>

        <div class="split">
          <div class="left">
            <div class="step-block orange">
              <p class="small" style="margin:0;">
                <strong class="accent-org">COND</strong> — $H(A|B) = H(AB) - H(B)$
              </p>
              <p class="tiny dim" style="margin:0.15em 0 0;">Conditional entropy via chain rule</p>
            </div>
            <div class="step-block yellow">
              <p class="small" style="margin:0;">
                <strong class="accent-ylw">SHAN</strong> — Classical entropy = Shannon entropy
              </p>
              <p class="tiny dim" style="margin:0.15em 0 0;">$H_{\text{class}} = H_{\text{Sh}}$</p>
            </div>
            <div class="step-block red">
              <p class="small" style="margin:0;">
                <strong class="accent-red">DPI</strong> — $H(A|B) \leq H(A|T(B))$
              </p>
              <p class="tiny dim" style="margin:0.15em 0 0;">Local processing cannot increase correlations</p>
            </div>

            <div class="highlight-box" style="text-align: center; margin-top:0.4rem;">
              <p class="small dim" style="margin:0 0 0.2rem 0;">Generalized entropy for any GPT:</p>
              <p style="font-size: 0.8em; margin: 0;">
                $H(\vec{P}) = \min_{e \in \mathcal{M}^*} H_{\text{Sh}}\!\bigl(e(\vec{P})\bigr)$
              </p>
              <p class="tiny dim" style="margin-top:0.2em;">Minimum Shannon entropy over all fine-grained measurements</p>
            </div>

            <div class="chain-row" style="margin-top: 0.4rem;">
              <div class="chain-node" style="border-color: var(--accent-orange);"><h4 class="accent-org">DPI</h4><p>+ COND + SHAN</p></div>
              <span class="chain-arrow">&#10233;</span>
              <div class="chain-node" style="border-color: var(--accent-purple);"><h4 class="accent-pur">IC</h4><p>$I \leq m$</p></div>
              <span class="chain-arrow">&#10233;</span>
              <div class="chain-node" style="border-color: var(--accent-blue);"><h4 class="accent-blu">Tsirelson</h4><p>$S \leq 2\sqrt{2}$</p></div>
            </div>
          </div>
          <div class="right">
            <div class="video-box">
              <video autoplay muted playsinline preload="auto">
                <source src="assets/s2_entropy.webm" type="video/webm" />
              </video>
            </div>
          </div>
        </div>

        <aside class="notes">
          Dahlsten, Lercher and Renner define a generalized entropy: the minimum
          Shannon entropy over all fine-grained measurements. Combined with
          COND and SHAN, the DPI implies Information Causality, which in turn
          implies Tsirelson's bound.
        </aside>
      </section>


      <!-- ═══ INFORMATION CAUSALITY & THE CHAIN ═══ -->
      <section data-transition="slide">
        <h3 style="margin-bottom:0.15em;"><span class="accent-pur">Information Causality</span></h3>
        <p class="small dim" style="margin-top:0;">The principle that bridges DPI to Tsirelson's bound</p>

        <div class="split">
          <div class="left">
            <!-- Game diagram (compact) -->
            <div class="flow" style="margin-bottom:0.3rem; transform:scale(0.9); transform-origin:left top;">
              <div class="flow-box" style="border-color:var(--accent-teal); padding:0.2rem 0.4rem;">
                <h4 style="color:var(--accent-teal); font-size:0.7em; margin:0;">Alice</h4>
                <p style="font-size:0.65em; margin:0;">$N$ bits $\vec{a}$</p>
              </div>
              <div class="flow-arrow" style="font-size:0.8em;">&rarr;</div>
              <div class="flow-box" style="border-color:var(--accent-orange); padding:0.2rem 0.4rem;">
                <h4 style="color:var(--accent-orange); font-size:0.7em; margin:0;">Channel</h4>
                <p style="font-size:0.65em; margin:0;">$m$ bits</p>
              </div>
              <div class="flow-arrow" style="font-size:0.8em;">&rarr;</div>
              <div class="flow-box" style="border-color:var(--accent-blue); padding:0.2rem 0.4rem;">
                <h4 style="color:var(--accent-blue); font-size:0.7em; margin:0;">Bob</h4>
                <p style="font-size:0.65em; margin:0;">guess $a_b$</p>
              </div>
            </div>

            <div class="highlight-box" style="padding:0.3rem; margin-bottom:0.3rem;">
              <p style="font-size:0.75em; margin:0; text-align:center;">
                $I = \sum_i I_{\text{Sh}}(a_i : \beta \mid b\!=\!i) \;\leq\; m$
              </p>
              <p class="tiny dim" style="margin:0.15em 0 0; text-align:center;">
                Total info Bob extracts ≤ bits sent — even with shared entanglement
              </p>
            </div>

            <div style="display: flex; gap: 0.5rem; margin-bottom:0.3rem;">
              <div class="verdict-card verdict-pass" style="flex:1; padding:0.25rem;">
                <h4 class="accent-grn" style="font-size:0.7em;">Quantum</h4>
                <p class="tiny accent-grn">$I \leq m$ &#10003;</p>
              </div>
              <div class="verdict-card verdict-fail" style="flex:1; padding:0.25rem;">
                <h4 class="accent-red" style="font-size:0.7em;">PR-Box</h4>
                <p class="tiny accent-red">$I > m$ &#10007;</p>
              </div>
            </div>

            <div class="highlight-box" style="padding:0.25rem; border-color:rgba(251,191,36,0.3);">
              <p style="margin: 0; font-size: 0.68em; text-align:center;">
                <strong class="accent-org">DPI</strong>
                <span style="color:var(--accent-gold); margin: 0 0.3em;">⟹</span>
                <strong class="accent-pur">IC</strong>
                <span style="color:var(--accent-gold); margin: 0 0.3em;">⟹</span>
                <strong class="accent-blu">Tsirelson</strong>
                <span style="color:var(--accent-gold); margin: 0 0.3em;">⟹</span>
                <strong class="accent-red">PR-Box out</strong>
              </p>
            </div>
          </div>
          <div class="right">
            <div class="video-box">
              <video autoplay muted playsinline preload="auto">
                <source src="assets/s2_ic_game.webm" type="video/webm" />
              </video>
            </div>
          </div>
        </div>

        <aside class="notes">
          IC says Bob cannot extract more info than bits sent, even with entanglement.
          DPI implies IC, IC implies Tsirelson, and Tsirelson excludes the PR-box.
          This is why nature stops at 2+√2: information-theoretic, not just relativistic.
        </aside>
      </section>


      <!-- ═══════════════════════════════════════════════════════
           SECTION IV: THE PROOF
           ═══════════════════════════════════════════════════════ -->
      <section class="section-divider" data-transition="fade">
        <div class="section-number">Part IV</div>
        <h2 style="background: linear-gradient(135deg, var(--accent-purple), var(--accent-red)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
          The Proof
        </h2>
        <div class="section-rule" style="background: linear-gradient(90deg, var(--accent-purple), var(--accent-red));"></div>
        <p class="small dim">How four lemmas build the main theorem</p>
      </section>


      <!-- ═══ PROOF ARCHITECTURE ═══ -->
      <!-- Removed: merged into the Four Lemmas accordion slide -->


      <!-- ═══ FOUR LEMMAS — INTERACTIVE ACCORDION ═══ -->
      <section data-transition="slide" style="padding: 14px 30px;">
        <h3 style="margin-bottom:0.05em;"><span class="accent-pur">The Four Lemmas</span></h3>
        <p class="small dim" style="margin-top:0; margin-bottom:0.3em;">Click a lemma to expand its equation and Venn diagram</p>

        <div class="lemma-accordion" id="lemma-accordion">

          <!-- LEMMA 3 -->
          <div class="lemma-card active" data-lemma="3" style="--lemma-color: var(--accent-blue);" onclick="activateLemma(this)">
            <div class="lemma-header">
              <span class="lemma-tag" style="color:var(--accent-blue); border-color:var(--accent-blue);">L3</span>
              <span class="lemma-name">Subadditivity</span>
              <span class="lemma-eq-small">$\sum H(A_i|\gamma) \geq H(A_1\!\cdots\!A_n|\gamma)$</span>
            </div>
            <div class="lemma-body">
              <div class="lemma-detail">
                <div class="lemma-eq-big">$\displaystyle\sum_{i=1}^{n} H(A_i|\gamma) \;\geq\; H(A_1 A_2 \ldots A_n | \gamma)$</div>
                <div class="lemma-description">
                  <strong>Intuition:</strong> Measuring parts individually loses correlations — individual entropies always overcount the total.<br>
                  <strong>Proof:</strong> Chain rule (<strong>COND</strong>) splits $H(A_1A_2|\gamma)=H(A_1|\gamma)+H(A_2|A_1\gamma)$.
                  Then <strong>DPI</strong> gives $H(A_2|A_1\gamma)\leq H(A_2|\gamma)$ — discarding info can't help. Induction over $n$ parts.
                </div>
                <span class="lemma-axioms">Axioms: COND + DPI</span>
              </div>
              <div class="lemma-venn">
                <svg viewBox="0 0 260 190" xmlns="http://www.w3.org/2000/svg">
                  <!-- Two overlapping circles: sum of parts > whole -->
                  <circle cx="100" cy="95" r="65" fill="rgba(37,99,235,0.1)" stroke="#2563eb" stroke-width="2"/>
                  <circle cx="160" cy="95" r="65" fill="rgba(5,150,105,0.1)" stroke="#059669" stroke-width="2"/>
                  <!-- Labels -->
                  <text x="72" y="92" fill="#2563eb" font-size="14" font-weight="600" text-anchor="middle">H(A|γ)</text>
                  <text x="130" y="75" fill="#d97706" font-size="12" font-weight="600" text-anchor="middle">I(A:B|γ)</text>
                  <text x="188" y="92" fill="#059669" font-size="14" font-weight="600" text-anchor="middle">H(B|γ)</text>
                  <!-- Caption -->
                  <text x="130" y="178" fill="#7a8a9a" font-size="12" text-anchor="middle">Sum counts overlap twice → ΣH(Aᵢ) ≥ H(joint)</text>
                </svg>
              </div>
            </div>
          </div>

          <!-- LEMMA 4 -->
          <div class="lemma-card" data-lemma="4" style="--lemma-color: var(--accent-green);" onclick="activateLemma(this)">
            <div class="lemma-header">
              <span class="lemma-tag" style="color:var(--accent-green); border-color:var(--accent-green);">L4</span>
              <span class="lemma-name">Product States</span>
              <span class="lemma-eq-small">$H(A|B) = H(A)$ for $\vec{P}_A \otimes \vec{P}_B$</span>
            </div>
            <div class="lemma-body">
              <div class="lemma-detail">
                <div class="lemma-eq-big">$H(A|B) = H(A) \quad\text{for } \vec{P}_A \otimes \vec{P}_B$</div>
                <div class="lemma-description">
                  <strong>Intuition:</strong> Independent systems share no correlations — observing $B$ tells you nothing about $A$.<br>
                  <strong>Proof:</strong> <strong>COND</strong>: $H(A|B) = H(AB) - H(B)$. For product states, <strong>SHAN</strong> + <strong>DPI</strong> give $H(AB) = H(A)+H(B)$.
                  So $H(A|B)=H(A)+H(B)-H(B)=H(A)$.
                </div>
                <span class="lemma-axioms">Axioms: COND + SHAN + DPI (all three)</span>
              </div>
              <div class="lemma-venn">
                <svg viewBox="0 0 260 190" xmlns="http://www.w3.org/2000/svg">
                  <!-- Two SEPARATE circles: no overlap = product state -->
                  <circle cx="75" cy="95" r="50" fill="rgba(37,99,235,0.1)" stroke="#2563eb" stroke-width="2"/>
                  <circle cx="185" cy="95" r="50" fill="rgba(234,88,12,0.1)" stroke="#ea580c" stroke-width="2"/>
                  <!-- Tensor symbol between -->
                  <text x="130" y="100" fill="#7a8a9a" font-size="24" font-weight="700" text-anchor="middle">⊗</text>
                  <!-- Labels -->
                  <text x="75" y="92" fill="#2563eb" font-size="15" font-weight="600" text-anchor="middle">H(A)</text>
                  <text x="75" y="108" fill="#2563eb" font-size="12" text-anchor="middle">= H(A|B)</text>
                  <text x="185" y="98" fill="#ea580c" font-size="15" font-weight="600" text-anchor="middle">H(B)</text>
                  <!-- Caption -->
                  <text x="130" y="178" fill="#7a8a9a" font-size="12" text-anchor="middle">No overlap → knowing B doesn't help with A</text>
                </svg>
              </div>
            </div>
          </div>

          <!-- LEMMA 5 -->
          <div class="lemma-card" data-lemma="5" style="--lemma-color: var(--accent-orange);" onclick="activateLemma(this)">
            <div class="lemma-header">
              <span class="lemma-tag" style="color:var(--accent-orange); border-color:var(--accent-orange);">L5</span>
              <span class="lemma-name">Positivity</span>
              <span class="lemma-eq-small">$H(X|Y) \geq 0$ for classical $X$</span>
            </div>
            <div class="lemma-body">
              <div class="lemma-detail">
                <div class="lemma-eq-big">$H(X|Y) \geq 0 \quad\text{for classical } X$</div>
                <div class="lemma-description">
                  <strong>Intuition:</strong> Classical data can be cloned. A copy of $X$ always determines $X$ perfectly, so conditional entropy stays $\geq 0$.<br>
                  <strong>Proof:</strong> Clone $X \to X'$. <strong>DPI</strong>: $H(X|Y)\geq H(X|YX')$. But $X'=X$, so $H(X|YX)=0$. Therefore $H(X|Y)\geq 0$.<br>
                  <em style="color:var(--accent-red);">Quantum contrast:</em> Entangled states can have $H(A|B)<0$ because no-cloning blocks this argument.
                </div>
                <span class="lemma-axioms">Axioms: DPI (+ classicality)</span>
              </div>
              <div class="lemma-venn">
                <svg viewBox="0 0 260 190" xmlns="http://www.w3.org/2000/svg">
                  <!-- X and Y overlapping, H(X|Y) highlighted as the remaining crescent -->
                  <circle cx="105" cy="95" r="60" fill="rgba(234,88,12,0.06)" stroke="#ea580c" stroke-width="2"/>
                  <circle cx="160" cy="95" r="55" fill="rgba(124,58,237,0.06)" stroke="#7c3aed" stroke-width="2"/>
                  <!-- Highlight H(X|Y) crescent -->
                  <clipPath id="xOnly">
                    <rect x="0" y="0" width="120" height="190"/>
                  </clipPath>
                  <circle cx="105" cy="95" r="60" fill="rgba(234,88,12,0.18)" clip-path="url(#xOnly)"/>
                  <!-- Labels -->
                  <text x="68" y="95" fill="#ea580c" font-size="14" font-weight="700" text-anchor="middle">H(X|Y)</text>
                  <text x="68" y="112" fill="#059669" font-size="13" font-weight="700" text-anchor="middle">≥ 0</text>
                  <text x="135" y="80" fill="#d97706" font-size="12" text-anchor="middle">I(X:Y)</text>
                  <text x="185" y="95" fill="#7c3aed" font-size="14" font-weight="600" text-anchor="middle">Y</text>
                  <text x="70" y="40" fill="#ea580c" font-size="13" font-weight="500" text-anchor="middle">X (classical)</text>
                  <!-- Caption -->
                  <text x="130" y="178" fill="#7a8a9a" font-size="12" text-anchor="middle">Classical X: crescent always has area ≥ 0</text>
                </svg>
              </div>
            </div>
          </div>

          <!-- LEMMA 6 -->
          <div class="lemma-card" data-lemma="6" style="--lemma-color: var(--accent-purple);" onclick="activateLemma(this)">
            <div class="lemma-header">
              <span class="lemma-tag" style="color:var(--accent-purple); border-color:var(--accent-purple);">L6</span>
              <span class="lemma-name">IC Bound</span>
              <span class="lemma-eq-small">$H(\vec{a}|B\vec{x}) \geq n - m$</span>
            </div>
            <div class="lemma-body">
              <div class="lemma-detail">
                <div class="lemma-eq-big">$H(\vec{a}\,|\,B\vec{x}) \;\geq\; n - m$</div>
                <div class="lemma-description">
                  <strong>Intuition:</strong> Alice has $n$ random bits but sends only $m$ bits. Bob's uncertainty about $\vec{a}$ is always at least $n-m$, regardless of any shared resource.<br>
                  <strong>Derivation:</strong> <strong>COND</strong> rewrites the difference.
                  <strong>L4</strong> (independence) gives $H(\vec{a})=n$.
                  <strong>L5</strong> (positivity) drops a non-negative term.
                  <strong>SHAN+DPI</strong> bound $H(\vec{x}|B)\leq m$. Combining: $H(\vec{a}|B\vec{x})\geq n-m$.
                </div>
                <span class="lemma-axioms">Axioms: All — combines L3, L4, L5 + COND + SHAN + DPI</span>
              </div>
              <div class="lemma-venn">
                <svg viewBox="0 0 260 190" xmlns="http://www.w3.org/2000/svg">
                  <!-- Three overlapping circles: Alice's bits, Channel, Bob's info -->
                  <circle cx="90" cy="85" r="55" fill="rgba(37,99,235,0.08)" stroke="#2563eb" stroke-width="2"/>
                  <circle cx="170" cy="85" r="55" fill="rgba(124,58,237,0.08)" stroke="#7c3aed" stroke-width="2"/>
                  <circle cx="130" cy="130" r="45" fill="rgba(217,119,6,0.08)" stroke="#d97706" stroke-width="1.5"/>
                  <!-- Labels -->
                  <text x="60" y="78" fill="#2563eb" font-size="13" font-weight="600" text-anchor="middle">ā</text>
                  <text x="60" y="93" fill="#2563eb" font-size="11" text-anchor="middle">(n bits)</text>
                  <text x="200" y="78" fill="#7c3aed" font-size="13" font-weight="600" text-anchor="middle">Bx̄</text>
                  <text x="200" y="93" fill="#7c3aed" font-size="11" text-anchor="middle">(Bob)</text>
                  <text x="130" y="155" fill="#d97706" font-size="12" font-weight="600" text-anchor="middle">Channel</text>
                  <text x="130" y="168" fill="#d97706" font-size="11" text-anchor="middle">(m bits)</text>
                  <!-- Bound annotation -->
                  <text x="130" y="55" fill="#059669" font-size="13" font-weight="700" text-anchor="middle">H(ā|Bx̄) ≥ n − m</text>
                  <!-- Caption -->
                  <text x="130" y="188" fill="#7a8a9a" font-size="11" text-anchor="middle">Overlap bounded by channel capacity m</text>
                </svg>
              </div>
            </div>
          </div>

        </div><!-- /lemma-accordion -->

        <aside class="notes">
          All four lemmas on one slide. Click each to expand its equation and Venn diagram.
          The Venn diagrams show the entropy relationships visually:
          L3 = overlapping sets (double-counting), L4 = disjoint sets (independence),
          L5 = crescent always positive (classicality), L6 = three-set bound (IC).
        </aside>
      </section>


      <!-- ═══ STEP-BY-STEP DERIVATION ═══ -->
      <section data-transition="slide">
        <h3 style="margin-bottom:0.15em;"><span class="accent-grn">From Axioms to Tsirelson</span></h3>
        <p class="small dim" style="margin-top:0;">The proof in three steps</p>

        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-top: 0.5rem;">
          <div class="step-block" style="border-left-color: var(--accent-purple);">
            <p class="small" style="margin:0; font-weight:600; color:var(--accent-purple);">Step 1: Bound total uncertainty</p>
            <p class="tiny" style="margin:0.2em 0 0; color: var(--text-muted);">
              $H(\vec{a}|B\vec{x}) - H(\vec{x}|\vec{a}B) = H(\vec{a}) - H(\vec{x}|B)$<br>
              $\geq H(\vec{a}) - H(\vec{x}) = n - H(\vec{x}) \geq n - m$
            </p>
            <p class="tiny dim" style="margin:0.1em 0 0;">Using COND, product states (Lemma 4), DPI, and SHAN.</p>
          </div>

          <div class="step-block blue">
            <p class="small" style="margin:0; font-weight:600; color:var(--accent-blue);">Step 2: Split into individual bits</p>
            <p class="tiny" style="margin:0.2em 0 0; color: var(--text-muted);">
              $\sum_i H(a_i | B\vec{x}) \geq H(\vec{a}|B\vec{x}) \geq n - m$<br>
              $\sum_i H(a_i | \beta(i)) \geq n - m$
            </p>
            <p class="tiny dim" style="margin:0.1em 0 0;">Using subadditivity (Lemma 3), then DPI on Bob's guess $\beta$.</p>
          </div>

          <div class="step-block green">
            <p class="small" style="margin:0; font-weight:600; color:var(--accent-green);">Step 3: Recover IC &#8594; Tsirelson</p>
            <p class="tiny" style="margin:0.2em 0 0; color: var(--text-muted);">
              $I = \sum_i I_{\text{Sh}}(a_i:\beta(i)) = n - \sum_i H(a_i|\beta(i)) \leq m$
            </p>
            <p class="tiny dim" style="margin:0.1em 0 0;">By SHAN, $H$ is Shannon for classical bits. IC implies Tsirelson (Pawlowski et al.).</p>
          </div>
        </div>

        <div class="highlight-box" style="margin-top: 0.5rem; text-align: center;">
          <p style="margin:0; font-size:0.8em;">
            <strong class="accent-ylw">Key insight:</strong> Only 3 axioms needed — fewer than the 5 of Pawlowski et al.
          </p>
        </div>

        <aside class="notes">
          Three clean steps: bound total uncertainty, split into per-bit bounds,
          recover IC. Only 3 axioms, compared to 5 in the original IC proof.
        </aside>
      </section>


      <!-- ═══════════════════════════════════════════════════════
           SECTION V: THE VERDICT
           ═══════════════════════════════════════════════════════ -->
      <section class="section-divider" data-transition="fade">
        <div class="section-number">Part V</div>
        <h2 style="background: linear-gradient(135deg, var(--accent-green), var(--accent-blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
          The Verdict
        </h2>
        <div class="section-rule" style="background: linear-gradient(90deg, var(--accent-green), var(--accent-blue));"></div>
        <p class="small dim">What breaks, and what it all means</p>
      </section>


      <!-- ═══ WHERE BOX-WORLD BREAKS ═══ -->
      <section data-transition="slide">
        <h3 style="margin-bottom:0.15em;"><span class="accent-red">Where Box-World Breaks Down</span></h3>
        <p class="small dim" style="margin-top:0;">A diagnostic comparison: which axioms does it violate?</p>

        <div class="two-col" style="font-size: 0.78em; margin-top: 0.5rem;">
          <div style="background: var(--bg-surface); border-radius: 10px; padding: 1rem; border: 1px solid var(--border);">
            <h4 class="accent-pur" style="margin:0 0 0.5rem 0; font-size: 1.1em;">Quantum Mechanics</h4>
            <ul class="prop-list">
              <li class="good">DPI holds ($H_{\text{vN}}$)</li>
              <li class="good">Strong subadditivity</li>
              <li class="good">$H(X|Y) \geq 0$ (classical)</li>
              <li class="good">IC: $I \leq m$</li>
              <li class="good">$S \leq 2\sqrt{2}$</li>
            </ul>
          </div>
          <div style="background: var(--bg-surface); border-radius: 10px; padding: 1rem; border: 1px solid var(--border);">
            <h4 class="accent-red" style="margin:0 0 0.5rem 0; font-size: 1.1em;">Box-World</h4>
            <ul class="prop-list">
              <li class="bad">DPI violated!</li>
              <li class="bad">SSA violated!</li>
              <li class="bad">Conditional entropy $&lt; 0$</li>
              <li class="bad">IC violated: $I > m$</li>
              <li class="bad">$S = 4 > 2\sqrt{2}$</li>
            </ul>
          </div>
        </div>

        <div style="display: flex; gap: 1rem; margin-top: 0.6rem;">
          <div class="highlight-box" style="flex: 1; text-align: center;">
            <p style="margin:0; font-size: 0.8em;">
              <strong class="accent-ylw">DPI is the dividing line.</strong>
              Any theory violating it can potentially exceed Tsirelson's bound.
            </p>
          </div>
          <div class="step-block" style="flex: 1; border-left-color: var(--accent-green);">
            <p class="small" style="margin:0;">
              <strong class="accent-grn">Minimality:</strong> COND + SHAN + DPI are sufficient.
              For certain entropy definitions, <em>DPI alone</em> is enough.
            </p>
          </div>
        </div>

        <aside class="notes">
          Box-world fails at DPI, strong subadditivity, and conditional entropy
          positivity. These failures are interlinked — DPI is the root cause.
        </aside>
      </section>


      <!-- ═══ THE BIG PICTURE ═══ -->
      <section data-transition="slide">
        <h3 style="margin-bottom:0.15em;"><span class="accent-blu">The Big Picture</span></h3>
        <p class="small dim" style="margin-top:0;">What this paper achieves and what remains open</p>

        <div class="split">
          <div class="left">
            <div class="step-block green">
              <p class="small" style="margin:0;">
                <strong class="accent-grn">Result 1:</strong>
                DPI + COND + SHAN imply Tsirelson's bound — proven for <em>any</em> GPT.
              </p>
            </div>
            <div class="step-block green" style="margin-top: 0.2rem;">
              <p class="small" style="margin:0;">
                <strong class="accent-grn">Result 2:</strong>
                Only 3 natural axioms needed — more minimal than the 5 of Pawlowski et al.
              </p>
            </div>
            <div class="step-block green" style="margin-top: 0.2rem;">
              <p class="small" style="margin:0;">
                <strong class="accent-grn">Result 3:</strong>
                For some entropy definitions, DPI alone suffices.
              </p>
            </div>

            <div class="highlight-box" style="margin-top: 0.5rem;">
              <p class="small" style="margin:0 0 0.2rem 0; color: var(--accent-gold); font-weight: 600;">Open Questions</p>
              <ul class="prop-list" style="font-size: 0.85em;">
                <li>Can DPI + additional axioms fully derive quantum theory?</li>
                <li>Are there non-quantum theories satisfying DPI between $\mathcal{L}$ and $\mathcal{Q}$?</li>
                <li>What supplements DPI to exclude <em>all</em> non-quantum correlations?</li>
              </ul>
            </div>

            <div class="chain-row" style="margin-top: 0.4rem;">
              <div class="chain-node" style="border-color: var(--accent-orange);"><h4 class="accent-org">DPI</h4></div>
              <span class="chain-arrow">&#10233;</span>
              <div class="chain-node" style="border-color: var(--accent-purple);"><h4 class="accent-pur">IC</h4></div>
              <span class="chain-arrow">&#10233;</span>
              <div class="chain-node" style="border-color: var(--accent-blue);"><h4 class="accent-blu">Tsirelson</h4></div>
              <span class="chain-arrow">&#10233;</span>
              <div class="chain-node" style="border-color: var(--accent-green);"><h4 class="accent-grn">QM?</h4><p>Open!</p></div>
            </div>
          </div>
          <div class="right">
            <div class="video-box">
              <video autoplay muted playsinline preload="auto">
                <source src="assets/s3_big_picture.webm" type="video/webm" />
              </video>
            </div>
          </div>
        </div>

        <aside class="notes">
          The paper establishes DPI as a fundamental principle bounding
          quantum correlations. The open question: can DPI plus additional
          axioms fully derive quantum theory?
        </aside>
      </section>


      <!-- ═══ THANK YOU ═══ -->
      <section class="title-slide" data-transition="fade">
        <h1 style="background: linear-gradient(135deg, var(--accent-green), var(--accent-blue), var(--accent-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
          Thank You
        </h1>
        <h2>Questions?</h2>

        <div style="margin: 1.2rem 0;">
          <span class="bound-badge bound-classical">$S \leq 2$</span>
          <span style="color:var(--accent-gold); font-size: 1.1em; margin: 0 0.3em;">&sub;</span>
          <span class="bound-badge bound-quantum">$S \leq 2\sqrt{2}$</span>
          <span style="color:var(--accent-gold); font-size: 1.1em; margin: 0 0.3em;">&sub;</span>
          <span class="bound-badge bound-ns">$S \leq 4$</span>
        </div>

        <div class="highlight-box" style="display: inline-block; margin-top: 0.8rem;">
          <p style="margin:0; font-size:0.75em;">
            <strong class="accent-org">DPI</strong>&ensp;&#10233;&ensp;
            <strong class="accent-pur">Information Causality</strong>&ensp;&#10233;&ensp;
            <strong class="accent-blu">Tsirelson's Bound</strong>
          </p>
          <p class="tiny dim" style="margin-top:0.2em;">
            The limit of quantum correlations is information-theoretic.
          </p>
        </div>

        <div class="meta" style="margin-top: 1.5rem;">
          <span style="font-size: 1em;"><strong style="color:var(--text-body);">Mohammed Boudjemaa &ensp;·&ensp; Yash Kumar Nagar &ensp;·&ensp; Nishchay Vora</strong></span>
          <span>Based on Dahlsten, Lercher &amp; Renner — <em>New J. Phys.</em> 14 (2012) 063024</span>
        </div>

        <aside class="notes">
          Thank you for your attention. We are happy to take questions.
        </aside>
      </section>


    </div><!-- /slides -->
  </div><!-- /reveal -->

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/notes/notes.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/math/math.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/highlight/highlight.js"></script>

  <script>
    Reveal.initialize({
      hash: true,
      history: true,
      center: true,
      transition: 'slide',
      transitionSpeed: 'default',
      backgroundTransition: 'fade',
      slideNumber: { style: 'c/t', color: '#3d4f5f', background: 'transparent' },
      showNotes: false,

      // Disable fragments — all content appears immediately
      fragments: false,

      mouseWheel: true,
      keyboard: true,
      touch: true,
      navigationMode: 'linear',

      width: 1920,
      height: 1080,

      plugins: [RevealNotes, RevealMath.KaTeX, RevealHighlight],

      katex: {
        local: 'https://cdn.jsdelivr.net/npm/katex@0.16.11',
        trust: true,
        macros: { "\\RR": "\\mathbb{R}" },
      },
    });

    // Slide metadata
    var slideMeta = [
      { title: "Title",                  section: "", part: "" },
      { title: "Part I: The Mystery",    section: "divider", part: "I", sectionName: "The Mystery", gradient: "var(--accent-blue), var(--accent-purple)" },
      { title: "Correlation Landscape",  section: "The Mystery", part: "I", sectionName: "The Mystery", gradient: "var(--accent-blue), var(--accent-purple)" },
      { title: "The CHSH Game",          section: "The Mystery", part: "I", sectionName: "The Mystery", gradient: "var(--accent-blue), var(--accent-purple)" },
      { title: "Part II: The Framework", section: "divider", part: "II", sectionName: "The Framework", gradient: "var(--accent-blue), var(--accent-green)" },
      { title: "GPT & Systems (k,l)",   section: "The Framework", part: "II", sectionName: "The Framework", gradient: "var(--accent-blue), var(--accent-green)" },
      { title: "Composite Systems",      section: "The Framework", part: "II", sectionName: "The Framework", gradient: "var(--accent-blue), var(--accent-green)" },
      { title: "Part III: The Principle", section: "divider", part: "III", sectionName: "The Principle", gradient: "var(--accent-orange), var(--accent-gold)" },
      { title: "Entropy & DPI",          section: "The Principle", part: "III", sectionName: "The Principle", gradient: "var(--accent-orange), var(--accent-gold)" },
      { title: "Information Causality",  section: "The Principle", part: "III", sectionName: "The Principle", gradient: "var(--accent-orange), var(--accent-gold)" },
      { title: "Part IV: The Proof",     section: "divider", part: "IV", sectionName: "The Proof", gradient: "var(--accent-purple), var(--accent-red)" },
      { title: "The Four Lemmas",        section: "The Proof", part: "IV", sectionName: "The Proof", gradient: "var(--accent-purple), var(--accent-red)" },
      { title: "From Axioms to Tsirelson", section: "The Proof", part: "IV", sectionName: "The Proof", gradient: "var(--accent-purple), var(--accent-red)" },
      { title: "Part V: The Verdict",    section: "divider", part: "V", sectionName: "The Verdict", gradient: "var(--accent-green), var(--accent-blue)" },
      { title: "Box-World Breakdown",    section: "The Verdict", part: "V", sectionName: "The Verdict", gradient: "var(--accent-green), var(--accent-blue)" },
      { title: "The Big Picture",        section: "The Verdict", part: "V", sectionName: "The Verdict", gradient: "var(--accent-green), var(--accent-blue)" },
      { title: "Thank You",             section: "", part: "" },
    ];

    // Section boundaries for progress bar markers
    var sections = [
      { idx: 1,  label: "I. The Mystery" },
      { idx: 4,  label: "II. The Framework" },
      { idx: 7,  label: "III. The Principle" },
      { idx: 10, label: "IV. The Proof" },
      { idx: 13, label: "V. The Verdict" },
    ];

    // Progress bar
    var progressBar = document.getElementById('progress-bar');
    var progressContainer = document.getElementById('progress-container');
    var totalSlides = slideMeta.length;

    sections.forEach(function(sec) {
      var pct = (sec.idx / (totalSlides - 1)) * 100;
      var marker = document.createElement('div');
      marker.className = 'progress-marker';
      marker.style.left = pct + '%';

      var label = document.createElement('div');
      label.className = 'progress-marker-label';
      label.style.left = pct + '%';
      label.textContent = sec.label;

      progressContainer.appendChild(marker);
      progressContainer.appendChild(label);
    });

    function updateProgress() {
      var current = Reveal.getIndices().h;
      var pct = (current / (totalSlides - 1)) * 100;
      progressBar.style.width = pct + '%';
    }

    Reveal.on('slidechanged', updateProgress);
    Reveal.on('ready', updateProgress);

    // Click progress bar to navigate
    progressContainer.addEventListener('click', function(e) {
      var rect = progressContainer.getBoundingClientRect();
      var pct = (e.clientX - rect.left) / rect.width;
      var targetSlide = Math.round(pct * (totalSlides - 1));
      Reveal.slide(targetSlide);
    });

    // Slide map
    var slideMap = document.getElementById('slide-map');
    var slideMapClose = document.getElementById('slide-map-close');
    var homeBtn = document.getElementById('home-btn');

    function buildSlideMap() {
      slideMap.innerHTML = '';
      var current = Reveal.getIndices().h;

      var title = document.createElement('div');
      title.style.cssText = 'width:100%; text-align:center; margin-bottom: 18px;';
      title.innerHTML = '<h2 style="color:var(--text-heading); font-size:22px; font-weight:700;">Slide Map</h2>' +
        '<p style="color:var(--text-muted); font-size:12px;">Click any slide to navigate. Press H or Escape to close.</p>';
      slideMap.appendChild(title);

      slideMeta.forEach(function(meta, i) {
        var card = document.createElement('div');
        card.className = 'map-card' + (i === current ? ' active' : '') +
                         (meta.section === 'divider' ? ' is-divider' : '');

        card.innerHTML =
          '<div class="map-num">Slide ' + (i + 1) + '</div>' +
          '<div class="map-title">' + meta.title + '</div>' +
          (meta.section && meta.section !== 'divider' ?
            '<div class="map-section">' + meta.section + '</div>' : '');

        card.onclick = function() {
          Reveal.slide(i);
          closeSlideMap();
        };

        slideMap.appendChild(card);
      });
    }

    function openSlideMap() {
      buildSlideMap();
      slideMap.classList.add('visible');
      slideMapClose.style.display = 'block';
    }

    function closeSlideMap() {
      slideMap.classList.remove('visible');
      slideMapClose.style.display = 'none';
    }

    homeBtn.addEventListener('click', function() {
      if (slideMap.classList.contains('visible')) {
        closeSlideMap();
      } else {
        openSlideMap();
      }
    });

    slideMapClose.addEventListener('click', closeSlideMap);

    document.addEventListener('keydown', function(e) {
      if (e.key === 'h' || e.key === 'H') {
        if (slideMap.classList.contains('visible')) { closeSlideMap(); }
        else { openSlideMap(); }
        e.preventDefault();
      }
      if (e.key === 'Escape' && slideMap.classList.contains('visible')) {
        closeSlideMap();
        e.preventDefault();
      }
    });

    Reveal.on('slidechanged', function() { closeSlideMap(); });

    // Video handler
    function handleSlideVideos(event) {
      document.querySelectorAll('video').forEach(function(v) { v.pause(); });
      var slide = event.currentSlide;
      if (slide) {
        slide.querySelectorAll('video').forEach(function(v) {
          v.currentTime = 0;
          v.play().catch(function() {});
        });
      }
    }
    Reveal.on('slidechanged', handleSlideVideos);
    Reveal.on('ready', handleSlideVideos);

    // Lemma accordion interaction
    function activateLemma(card) {
      var cards = document.querySelectorAll('.lemma-card');
      cards.forEach(function(c) { c.classList.remove('active'); });
      card.classList.add('active');
    }

    // Keyboard: cycle lemmas with up/down arrows while on the lemma slide
    document.addEventListener('keydown', function(e) {
      var currentSlide = Reveal.getCurrentSlide();
      var accordion = currentSlide && currentSlide.querySelector('#lemma-accordion');
      if (!accordion) return;

      if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
        var cards = Array.from(accordion.querySelectorAll('.lemma-card'));
        var activeIdx = cards.findIndex(function(c) { return c.classList.contains('active'); });
        if (activeIdx === -1) activeIdx = 0;

        if (e.key === 'ArrowDown') {
          if (activeIdx < cards.length - 1) {
            activateLemma(cards[activeIdx + 1]);
            e.preventDefault();
            e.stopPropagation();
          }
        } else if (e.key === 'ArrowUp') {
          if (activeIdx > 0) {
            activateLemma(cards[activeIdx - 1]);
            e.preventDefault();
            e.stopPropagation();
          }
        }
      }
    }, true);

    // Mouse wheel: cycle lemmas when hovering over the accordion
    (function() {
      var acc = document.getElementById('lemma-accordion');
      if (!acc) return;
      var wheelCooldown = false;
      acc.addEventListener('wheel', function(e) {
        if (wheelCooldown) { e.preventDefault(); return; }
        var cards = Array.from(acc.querySelectorAll('.lemma-card'));
        var activeIdx = cards.findIndex(function(c) { return c.classList.contains('active'); });
        if (activeIdx === -1) activeIdx = 0;

        if (e.deltaY > 0 && activeIdx < cards.length - 1) {
          activateLemma(cards[activeIdx + 1]);
          e.preventDefault();
          e.stopPropagation();
          wheelCooldown = true;
          setTimeout(function() { wheelCooldown = false; }, 400);
        } else if (e.deltaY < 0 && activeIdx > 0) {
          activateLemma(cards[activeIdx - 1]);
          e.preventDefault();
          e.stopPropagation();
          wheelCooldown = true;
          setTimeout(function() { wheelCooldown = false; }, 400);
        }
      }, { passive: false });
    })();

    // ═══════════════════════════════════════════════
    // THEME TOGGLE
    // ═══════════════════════════════════════════════
    var themeToggle = document.getElementById('theme-toggle');
    var isLightMode = localStorage.getItem('tsirelson-theme') === 'light';

    function applyTheme(light) {
      if (light) {
        document.body.classList.add('light-mode');
        themeToggle.innerHTML = '&#9790;'; // moon icon
        themeToggle.title = 'Switch to Dark Mode (press T)';
        // Update Reveal theme
        document.getElementById('theme').href = 'https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/theme/white.css';
        document.getElementById('code-theme').href = 'https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/highlight/github.css';
      } else {
        document.body.classList.remove('light-mode');
        themeToggle.innerHTML = '&#9788;'; // sun icon
        themeToggle.title = 'Switch to Light Mode (press T)';
        // Update Reveal theme
        document.getElementById('theme').href = 'https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/theme/black.css';
        document.getElementById('code-theme').href = 'https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/highlight/monokai.css';
      }
    }

    // Apply initial theme
    applyTheme(isLightMode);

    themeToggle.addEventListener('click', function() {
      isLightMode = !isLightMode;
      localStorage.setItem('tsirelson-theme', isLightMode ? 'light' : 'dark');
      applyTheme(isLightMode);
    });

    // Keyboard shortcut T for theme toggle
    document.addEventListener('keydown', function(e) {
      if (e.key === 't' || e.key === 'T') {
        if (!e.ctrlKey && !e.metaKey && !e.altKey) {
          isLightMode = !isLightMode;
          localStorage.setItem('tsirelson-theme', isLightMode ? 'light' : 'dark');
          applyTheme(isLightMode);
          e.preventDefault();
        }
      }
    });

    // ═══════════════════════════════════════════════
    // PERSISTENT SECTION LABEL
    // ═══════════════════════════════════════════════
    var sectionLabel = document.getElementById('section-label');
    var sectionPart = sectionLabel.querySelector('.section-part');
    var sectionName = sectionLabel.querySelector('.section-name');

    function updateSectionLabel(slideIndex) {
      var meta = slideMeta[slideIndex];
      
      // Hide on title slide, dividers, and thank you slide
      if (!meta || !meta.part || meta.section === 'divider' || slideIndex === 0 || slideIndex === slideMeta.length - 1) {
        sectionLabel.classList.remove('visible');
        return;
      }

      // Show section label with current section info
      sectionPart.textContent = 'Part ' + meta.part;
      sectionName.textContent = meta.sectionName;
      
      // Update gradient based on section
      if (meta.gradient) {
        sectionName.style.background = 'linear-gradient(135deg, ' + meta.gradient + ')';
        sectionName.style.webkitBackgroundClip = 'text';
        sectionName.style.webkitTextFillColor = 'transparent';
        sectionName.style.backgroundClip = 'text';
      }
      
      sectionLabel.classList.add('visible');
    }

    // Update on slide change
    Reveal.on('slidechanged', function(event) {
      updateSectionLabel(event.indexh);
    });

    // Initial update
    Reveal.on('ready', function(event) {
      updateSectionLabel(event.indexh);
    });
  </script>
</body>
</html>
